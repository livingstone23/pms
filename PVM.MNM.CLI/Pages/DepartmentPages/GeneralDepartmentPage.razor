@using PVM.MNM.CLI.ApplicationStates;
@implements IDisposable
@inject DepartmentState departmentState

@if(departmentState.ShowGeneralDepartment) {

    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="float-start">General Department</h4>
                        @* <button class="btn btn-outline-success float-end" onclick="@OpenDialog" > 
                            Add Department
                        </button> *@
                        <button class="btn btn-outline-success float-end" @onclick="OpenDialog">
                            <i class="bi bi-plus-circle-dotted"></i> Add Department
                        </button>
                    </div>
                    <div class="card-header" style="max-height:580px; overflow-x:hidden; overflow-y:scroll;">
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Id</th>
                                        <th scope="col">General Department</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row">1</th>
                                        <td>Mark</td>
                                        <td>Otto</td>
                                        <td>mdo</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">2</th>
                                        <td>Jacob</td>
                                        <td>Thorton</td>
                                        <td>Fat</td>
                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


<GeneralDepartmentDialog @ref="generalDepartmentDialog"/>


@code
{

    GeneralDepartmentDialog? generalDepartmentDialog;

    GeneralDepartmentDTO department = new();

    protected override void OnInitialized()
    {
        departmentState.GeneralDepartmentAction += StateHasChanged;
    }

    public void Dispose()
    {
        departmentState.GeneralDepartmentAction -= StateHasChanged;
    }

    private void OpenDialog()
    {
        if (generalDepartmentDialog != null)
        {
            generalDepartmentDialog.OpenDialog();
        }
    }

}
